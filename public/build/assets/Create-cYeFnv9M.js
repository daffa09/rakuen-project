import{G as N,r as o,j as e,S as w}from"./app-B1b2Ztae.js";import{A as k}from"./AuthenticatedLayout-D2OjMHUf.js";import{E as C}from"./Editor-B3TIbUDB.js";import"./transition-BlLNfaN5.js";function F({editData:t,auth:g}){const{data:n,setData:l,post:c,processing:x}=N({id:"",title:"",banner:null,content:"",category:"",lang_images:"",gallery:[]}),[d,i]=o.useState(null),[m,u]=o.useState([]),[h,b]=o.useState([]);o.useEffect(()=>{j(),t.id&&(l("id",t.id),l("content",t.content),l("title",t.title),l("category",t.category_id),l("banner",t.banner),l("gallery",t.gallery),l("lang_images",t.lang_urls),i(t.banner),u(t.gallery))},[]);const p=s=>{const a=s.target.files[0];if(l("banner",a),a){const r=new FileReader;r.onloadend=()=>{i(r.result)},r.readAsDataURL(a)}else i(null)},f=s=>{const a=Array.from(s.target.files);l("gallery",a);const r=a.map(v=>URL.createObjectURL(v));u(r)},j=async()=>{try{const s=await fetch("/getAllCategories");if(!s.ok)throw new Error("Network response was not ok");const a=await s.json();b(a.data)}catch(s){console.error("Error fetching categories:",s)}},y=async s=>{s.preventDefault();try{t.id?c(route("projects.update")):c(route("projects.store"))}catch(a){a.response&&a.response.status===422&&setErrors(a.response.data.errors)}};return e.jsxs(k,{user:g.user,children:[e.jsx(w,{title:t.id?"Edit Project":"Create Project"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto",style:{width:"80%"},children:[e.jsx("h1",{className:"text-5xl font-semibold pb-10 text-center",children:t.id?"Edit Project":"Create Project"}),e.jsx("div",{className:"w-9/12 mx-auto",children:e.jsxs("form",{onSubmit:y,encType:"multipart/form-data",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-xl font-medium",children:"Title"}),e.jsx("input",{type:"text",name:"title",id:"title",value:n.title,onChange:s=>l("title",s.target.value),className:"mt-1 text-black focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"}),e.jsx("p",{className:"text-red-500 text-xs italic"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"banner",className:"block text-xl font-medium",children:"Banner"}),d&&e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:d,alt:"Banner Preview",className:"w-2/4 h-auto rounded-md mx-auto"})}),e.jsx("input",{type:"file",name:"banner",id:"banner",onChange:p,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm rounded-md"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"content",className:"block text-xl font-medium mb-1",children:"Content"}),e.jsx(C,{value:n.content,onChange:s=>l("content",s)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"category",className:"block text-xl font-medium",children:"Category"}),e.jsxs("select",{name:"category",id:"category",value:n.category,onChange:s=>l("category",s.target.value),className:"mt-1 text-black focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"Select Category"}),h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"lang_images",className:"block text-xl font-medium",children:["Languange Logo"," ",e.jsxs("span",{className:"text-sm",children:["(copy from"," ",e.jsx("a",{href:"https://devicon.dev/",target:"_blank",className:"underline text-blue-500 hover:to-blue-700",children:"https://devicon.dev/"}),") [hint: seperate by coma]"]})]}),e.jsx("input",{type:"text",placeholder:"devicon-html5-plain, devicon-javascript-plain",name:"lang_images",id:"lang_images",value:n.lang_images,onChange:s=>l("lang_images",s.target.value),className:"mt-1 text-black focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"gallery",className:"block text-xl font-medium",children:"Gallery"}),m.length>0&&e.jsx("div",{className:"w-full mb-4 flex justify-center",children:e.jsx("div",{className:"grid grid-cols-4 gap-4",children:m.map((s,a)=>e.jsx("img",{src:s,alt:s,className:"w-36 h-auto rounded-md ml-4"},a))})}),e.jsx("input",{type:"file",name:"gallery[]",id:"gallery",multiple:!0,onChange:f,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm rounded-md"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("button",{onClick:()=>{history.back()},disabled:x,className:"bg-red-500 text-white px-4 py-2 rounded-md mr-5",children:"Back to List"}),e.jsx("button",{type:"submit",className:"bg-indigo-500 text-white px-4 py-2 rounded-md",children:t.id?"Edit Project":"Create Project"})]})]})})]})})]})}export{F as default};
