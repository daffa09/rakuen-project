import{G as N,r as n,j as e,S as v}from"./app-B1b2Ztae.js";import{A as k}from"./AuthenticatedLayout-D2OjMHUf.js";import{E as C}from"./Editor-B3TIbUDB.js";import"./transition-BlLNfaN5.js";function F({editData:r,auth:x}){const{data:o,setData:l,post:c,processing:h}=N({id:"",title:"",banner:null,content:"",category:"",gallery:[]}),[d,i]=n.useState(null),[m,u]=n.useState([]),[g,b]=n.useState([]);n.useEffect(()=>{p(),r.id&&(l("id",r.id),l("content",r.content),l("title",r.title),l("category",r.category_id),l("banner",r.banner),l("gallery",r.gallery),i(r.banner),u(r.gallery))},[]);const f=t=>{const s=t.target.files[0];if(l("banner",s),s){const a=new FileReader;a.onloadend=()=>{i(a.result)},a.readAsDataURL(s)}else i(null)},j=t=>{const s=Array.from(t.target.files);l("gallery",s);const a=s.map(w=>URL.createObjectURL(w));u(a)},p=async()=>{try{const t=await fetch("/getAllCategories");if(!t.ok)throw new Error("Network response was not ok");const s=await t.json();b(s.data)}catch(t){console.error("Error fetching categories:",t)}},y=async t=>{t.preventDefault();try{r.id?c(route("articles.update")):c(route("articles.store"))}catch(s){s.response&&s.response.status===422&&setErrors(s.response.data.errors)}};return e.jsxs(k,{user:x.user,children:[e.jsx(v,{title:r.id?"Edit Project":"Create Project"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto",style:{width:"80%"},children:[e.jsx("h1",{className:"text-5xl font-semibold pb-10 text-center",children:r.id?"Edit Articles":"Create Articles"}),e.jsx("div",{className:"w-9/12 mx-auto",children:e.jsxs("form",{onSubmit:y,encType:"multipart/form-data",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-xl font-medium",children:"Title"}),e.jsx("input",{type:"text",name:"title",id:"title",value:o.title,onChange:t=>l("title",t.target.value),className:"mt-1 text-black focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"}),e.jsx("p",{className:"text-red-500 text-xs italic"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"banner",className:"block text-xl font-medium",children:"Banner"}),d&&e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:d,alt:"Banner Preview",className:"w-2/4 h-auto rounded-md mx-auto"})}),e.jsx("input",{type:"file",name:"banner",id:"banner",onChange:f,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm rounded-md"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"content",className:"block text-xl font-medium mb-1",children:"Content"}),e.jsx(C,{value:o.content,onChange:t=>l("content",t)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"category",className:"block text-xl font-medium",children:"Category"}),e.jsxs("select",{name:"category",id:"category",value:o.category,onChange:t=>l("category",t.target.value),className:"mt-1 text-black focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"Select Category"}),g.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"gallery",className:"block text-xl font-medium",children:"Gallery"}),m.length>0&&e.jsx("div",{className:"w-full mb-4 flex justify-center",children:e.jsx("div",{className:"grid grid-cols-4 gap-4",children:m.map((t,s)=>e.jsx("img",{src:t,alt:t,className:"w-36 h-auto rounded-md ml-4"},s))})}),e.jsx("input",{type:"file",name:"gallery[]",id:"gallery",multiple:!0,onChange:j,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm rounded-md"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("button",{onClick:()=>{history.back()},className:"bg-red-500 text-white px-4 py-2 rounded-md mr-5",children:"Back to List"}),e.jsx("button",{type:"submit",disabled:h,className:"bg-indigo-500 text-white px-4 py-2 rounded-md",children:r.id?"Edit Articles":"Create Articles"})]})]})})]})})]})}export{F as default};
